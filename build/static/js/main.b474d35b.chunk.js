(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{145:function(e,t,a){},165:function(e,t,a){e.exports=a(382)},170:function(e,t,a){},176:function(e,t,a){},286:function(e,t,a){},306:function(e,t,a){},353:function(e,t,a){},368:function(e,t,a){},375:function(e,t,a){},378:function(e,t,a){},382:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"getUser",function(){return W}),a.d(n,"logout",function(){return L}),a.d(n,"updateProfilePic",function(){return U}),a.d(n,"updateBio",function(){return H}),a.d(n,"getStory",function(){return q}),a.d(n,"storyAddition",function(){return K}),a.d(n,"makeOpenClose",function(){return Y}),a.d(n,"addTitle",function(){return J}),a.d(n,"addDescripton",function(){return X}),a.d(n,"addPOV",function(){return $}),a.d(n,"addForkRestriction",function(){return Q}),a.d(n,"addModerator",function(){return Z}),a.d(n,"toggleReadview",function(){return ee}),a.d(n,"default",function(){return te});var r=a(0),i=a.n(r),o=a(27),s=a.n(o),l=a(10),c=a(11),d=a(13),u=a(12),p=a(14),h=(a(170),a(52)),m=a(30),b=a(147),f=a.n(b),g=a(100),E=a.n(g),v=a(31),y=a.n(v),S=a(148),k=a.n(S),w=a(149),O=a.n(w),C=a(99),j=a.n(C),N=a(22),x={userName:"",userId:"",userProfilePic:"",bio:"",storyId:"",storyBody:"",storyAddition:"",openClose:!1,storyGuideTitle:"",storyGuideDescripton:"",storyGuidePOV:"",storyGuideFork:"",storyGuideMod:"",contribution:"",isReadView:!1},F="GET_USER",P="GET_STORY",B="STORY_ADDITION",_="OPEN_CLOSE",A="UPDATE_BIO",R="UPDATE_PROFILEPIC",D="ADD_TITLE",T="ADD_DESCRIPTION",I="ADD_POV",M="ADD_FORK_RESTRICTION",G="ADD_MODERATOR_RESTRICTION",V="LOGOUT",z="TOGGLE_READVIEW";function W(e,t){return{type:F,payload:{userId:e,userName:t}}}function L(){return{type:V}}function U(e){return{type:R,payload:{profilePic:e}}}function H(e){return{type:A,payload:{bio:e}}}function q(e,t){return{type:P,payload:{storyId:e,storyBody:t}}}function K(e){return{type:B,payload:{storyAddition:e}}}function Y(e){return{type:_,payload:{open:!e}}}function J(e){return{type:D,payload:e}}function X(e){return{type:T,payload:e}}function $(e){return{type:I,payload:e}}function Q(e){return{type:M,payload:e}}function Z(e){return{type:G,payload:e}}function ee(e){return{type:z,payload:!e}}var te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0,a=t.payload;switch(t.type){case F:return Object.assign({},e,{userId:a.userId,userName:a.userName});case V:return Object.assign({},e,{userId:"",userName:""});case P:return Object.assign({},e,{storyId:a.storyId,storyBody:a.storyBody});case _:return Object.assign({},e,{openClose:a.open});case R:return Object.assign({},e,{userProfilePic:a.profilePic});case D:return Object.assign({},e,{storyGuideTitle:t.payload});case T:return Object.assign({},e,{storyGuideDescripton:t.payload});case I:return Object.assign({},e,{storyGuidePOV:t.payload});case M:return Object.assign({},e,{storyGuideFork:t.payload});case G:return Object.assign({},e,{storyGuideMod:t.payload});case A:return Object.assign({},e,{bio:t.payload});case z:return Object.assign({},e,{isReadView:t.payload});default:return e}},ae=a(387),ne=(a(176),function(e){function t(){return Object(l.a)(this,t),Object(d.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=[{name:"Dashboard",path:"/",shouldShow:!0},{name:"My Profile",path:"/user",shouldShow:!!this.props.userId},{name:"Login",path:"/Login",shouldShow:!this.props.userId},{name:"Create Story",path:"/create_one",shouldShow:!!this.props.userId}],a=this.props,n=a.classes,r=a.theme,o=a.openClose,s=t.filter(function(e){return e.shouldShow}).map(function(t){return i.a.createElement(ae.a,{to:t.path,key:t.name,onClick:function(){return e.props.makeOpenClose(e.props.openClose)}},i.a.createElement(j.a,null,t.name))});return i.a.createElement("div",{className:n.root},i.a.createElement(f.a,{className:n.drawer,variant:"persistent",anchor:"left",open:o,classes:{paper:n.drawerPaper}},i.a.createElement("div",{className:n.drawerHeader},i.a.createElement(y.a,{"padding-bottom":"35px",onClick:function(){return e.props.makeOpenClose(e.props.openClose)}},"ltr"===r.direction?i.a.createElement(k.a,null):i.a.createElement(O.a,null))),i.a.createElement(E.a,null,s)))}}]),t}(i.a.Component)),re=Object(m.withStyles)(function(e){return{root:{display:"flex"},appBar:{transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{width:"calc(100% - ".concat(240,"px)"),marginLeft:240,transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen})},menuButton:{marginLeft:12,marginRight:20},hide:{display:"none"},drawer:{width:240,flexShrink:0},drawerPaper:{width:240},drawerHeader:Object(h.a)({display:"flex",alignItems:"center",padding:"0 8px"},e.mixins.toolbar,{justifyContent:"flex-end"}),content:{flexGrow:1,padding:3*e.spacing.unit,transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),marginLeft:-240},contentShift:{transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginLeft:0}}},{withTheme:!0})(ne),ie=Object(N.b)(function(e){return{openClose:e.openClose,userId:e.userId}},{makeOpenClose:Y})(re),oe=a(391),se=a(388),le=a(24),ce=a(4),de=(a(286),a(23)),ue=a.n(de),pe=(a(306),a(6)),he=a.n(pe),me=a(38),be=a.n(me),fe=a(21),ge=a.n(fe),Ee=a(9),ve=a.n(Ee),ye=a(44),Se=a.n(ye),ke=a(28),we=a.n(ke),Oe=a(82);var Ce=Object(m.withStyles)({root:{background:"#EAFBF7",borderRadius:5,border:0,color:"#378674",fontSize:20,height:48,padding:"0 30px",width:300}})(function(e){var t=e.classes,a=(e.children,e.className),n=Object(Oe.a)(e,["classes","children","className"]);return i.a.createElement(ve.a,Object.assign({className:he()(t.root,a)},n),e.buttonName)}),je=a(53),Ne=a.n(je),xe=a(54),Fe=a.n(xe),Pe=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).handleClose=function(){a.setState({open:!1})},a.state={open:!1,error:""},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){if(this.props.error){var e=this.props.error;this.setState({error:e,open:!0})}}},{key:"render",value:function(){return i.a.createElement(Ne.a,{zIndex:"1000000",anchorOrigin:{vertical:"bottom",horizontal:"left"},open:this.state.open,autoHideDuration:5e3,onClose:this.handleClose,message:i.a.createElement("p",null,"Error:",this.props.error),action:[i.a.createElement(y.a,{key:"close","aria-label":"Close",color:"inherit",onClick:this.handleClose},i.a.createElement(Fe.a,null))]})}}]),t}(r.Component),Be=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(d.a)(this,Object(u.a)(t).call(this))).handleOpen=function(){e.setState({open:!0})},e.handleClose=function(){e.setState({open:!1})},e.handleName=function(t){return function(a){e.setState(Object(le.a)({},t,a.target.value))}},e.handleEmail=function(t){return function(a){e.setState(Object(le.a)({},t,a.target.value))}},e.handlePassword=function(t){return function(a){e.setState(Object(le.a)({},t,a.target.value))}},e.state={open:!1,username:"",email:"",password:"",showPassword:!1,serverErrorMessage:"",formValidationCheck:""},e.cancel=e.cancel.bind(Object(ce.a)(Object(ce.a)(e))),e.registerUser=e.registerUser.bind(Object(ce.a)(Object(ce.a)(e))),e}return Object(p.a)(t,e),Object(c.a)(t,[{key:"registerUser",value:function(){var e=this,t=this.state,a=t.username,n=t.email,r=t.password;r.length<8?this.setState({formValidationCheck:i.a.createElement(Pe,{error:" Password too short."})}):n.includes("@")?(this.props.history.push("/"),ue.a.post("/api/register",{username:a,email:n,password:r}).then(function(t){t.data?(alert("Registered. Now, login."),e.setState({open:!1})):(alert("Email already exists in database."),e.setState({password:""}),e.setState({username:"",email:"",password:"",errorMessage:""}))}).catch(function(t){e.setState({serverErrorMessage:" Server error"})})):this.setState({formValidationCheck:i.a.createElement(Pe,{error:" Invalid email address."})})}},{key:"cancel",value:function(){this.setState({username:"",email:"",password:"",open:!1})}},{key:"render",value:function(){var e=this.props.classes,t=this.state.serverErrorMessage&&i.a.createElement(Pe,{error:this.state.serverErrorMessage});return i.a.createElement("div",null,i.a.createElement(Ce,{buttonName:"REGISTER",onClick:this.handleOpen}),i.a.createElement(be.a,{zIndex:"1","aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",open:this.state.open,onClose:this.handleClose},i.a.createElement("div",{className:e.paper},i.a.createElement(ge.a,{variant:"h5",id:"modal-title",style:{color:"#EAFBF7",fontFamily:"sans-serif",fontSize:50,fontWeight:700}},"Register"),i.a.createElement(ge.a,{variant:"subtitle1",id:"simple-modal-description"},i.a.createElement("form",{className:e.container,noValidate:!0,autoComplete:"off"},i.a.createElement(we.a,{classname:"inputBox",id:"outlined-name",label:"Username",name:"username",value:this.state.username,onChange:this.handleName("username"),margin:"normal",autoComplete:"none",variant:"outlined",style:{backgroundColor:"#EAFBF7",color:"#378674",borderRadius:5,fontFamily:"sans-serif",fontSize:50,fontWeight:700}}),i.a.createElement("br",null),i.a.createElement(we.a,{id:"outlined-email-input",label:"Email",type:"email",name:"email",autoComplete:"email",required:!0,pattern:"[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,}$",margin:"normal",variant:"outlined",value:this.state.email,onChange:this.handleEmail("email"),style:{backgroundColor:"#EAFBF7",color:"#378674",borderRadius:5,fontFamily:"sans-serif",fontSize:50,fontWeight:700}}),i.a.createElement("br",null),i.a.createElement(Se.a,{className:he()(e.margin,e.textField)},i.a.createElement(we.a,{className:"inputBox",id:"outlined-password-input",label:"Password",type:"password",autoComplete:"current-password",value:this.state.password,name:"password",onChange:this.handlePassword("password"),required:!0,minlength:"8",margin:"normal",variant:"outlined",border:"",style:{backgroundColor:"#EAFBF7",color:"#378674",borderRadius:5,fontFamily:"sans-serif",fontSize:50,fontWeight:700}})))),i.a.createElement("br",null),i.a.createElement("div",{className:"buttonBox"},i.a.createElement(ve.a,{variant:"contained",color:"primary",style:{background:"#EAFBF7",borderRadius:5,color:"#378674",fontSize:20,height:48,padding:"0 30px",width:300},onClick:this.registerUser},"Register"),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement(ve.a,{style:{background:"#EAFBF7",borderRadius:5,border:0,color:"#378674",fontSize:20,height:48,padding:"0 30px",width:300},onClick:this.cancel},"Cancel")))),t,this.state.formValidationCheck)}}]),t}(r.Component),_e=Object(m.withStyles)(function(e){return{paper:{width:600,backgroundColor:"#378674",padding:20,margin:"150px auto",textAlign:"center",borderRadius:5,outline:"none"}}})(Be);var Ae=Object(m.withStyles)({root:{background:"#EAFBF7",borderRadius:5,border:0,color:"#378674",fontSize:20,height:48,padding:"0 30px",width:300,margin:"auto"}})(function(e){var t=e.classes,a=(e.children,e.className),n=Object(Oe.a)(e,["classes","children","className"]);return i.a.createElement(ve.a,Object.assign({className:he()(t.root,a)},n,{onClick:e.login}),"Login")}),Re=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){a.setState(Object(le.a)({},e.target.name,e.target.value))},a.handleClick=function(){a.setState({open:!0})},a.handleClose=function(){a.setState({open:!1})},a.handleKeyPress=function(e){"Enter"===e.key&&a.login()},a.state={username:"",password:"",open:!0,serverErrorMessage:""},a.handleChange=a.handleChange.bind(Object(ce.a)(Object(ce.a)(a))),a.login=a.login.bind(Object(ce.a)(Object(ce.a)(a))),a.handleClick=a.handleClick.bind(Object(ce.a)(Object(ce.a)(a))),a.handleKeyPress=a.handleKeyPress.bind(Object(ce.a)(Object(ce.a)(a))),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"login",value:function(){var e=this;ue.a.post("/api/login",{username:this.state.username,password:this.state.password}).then(function(t){var a=t.data,n=a.username,r=a.id;e.props.getUser(r,n),e.props.history.push("/")}).catch(function(t){e.setState({serverErrorMessage:" Server error"})})}},{key:"render",value:function(){var e=this.state.serverErrorMessage&&i.a.createElement(Pe,{error:this.state.serverErrorMessage});return i.a.createElement("div",null,i.a.createElement("div",{className:"LoginBox"},i.a.createElement("div",null,"Login"),i.a.createElement("form",{className:"LoginForm",onKeyPress:this.handleKeyPress},i.a.createElement(we.a,{className:"inputBox",id:"outlined-name",label:"Username",name:"username",value:this.state.username,onChange:this.handleChange,margin:"normal",variant:"outlined",style:{backgroundColor:"#EAFBF7",color:"#378674",borderRadius:5}}),i.a.createElement("br",null),i.a.createElement(we.a,{className:"inputBox",id:"outlined-password-input",label:"Password",type:"password",autoComplete:"current-password",value:this.state.password,name:"password",onChange:this.handleChange,margin:"normal",variant:"outlined",border:"",style:{backgroundColor:"#EAFBF7",color:"#378674",borderRadius:5}}),i.a.createElement("br",null),i.a.createElement(Ae,{login:this.login}),i.a.createElement("br",null),i.a.createElement(_e,{history:this.props.history})),i.a.createElement(Ne.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:this.state.open,autoHideDuration:5e3,onClose:this.handleClose,message:i.a.createElement("p",null,"Welcome Story Teller"),action:[i.a.createElement(y.a,{key:"close","aria-label":"Close",color:"inherit",onClick:this.handleClose},i.a.createElement(Fe.a,null))]})),e)}}]),t}(r.Component),De=Object(N.b)(null,{getUser:W})(Re),Te=a(77),Ie=a.n(Te),Me=a(152),Ge=a.n(Me),Ve=a(150),ze=(a(145),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).handleKeyPress=function(e){"Enter"===e.key&&a.handle()},a.state={open:!1,input:""},a.handleInput=a.handleInput.bind(Object(ce.a)(Object(ce.a)(a))),a.handle=a.handle.bind(Object(ce.a)(Object(ce.a)(a))),a.open=a.open.bind(Object(ce.a)(Object(ce.a)(a))),a.close=a.close.bind(Object(ce.a)(Object(ce.a)(a))),a.handleKeyPress=a.handleKeyPress.bind(Object(ce.a)(Object(ce.a)(a))),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"open",value:function(){this.setState({open:!0})}},{key:"close",value:function(){this.setState({open:!1})}},{key:"handleInput",value:function(e){this.setState({input:e})}},{key:"handle",value:function(){this.props.change(this.state.input),this.setState({open:!1})}},{key:"render",value:function(){var e=this,t=this.props.classes;return i.a.createElement("div",{className:t.but},i.a.createElement(Ve.a,{icon:"pencil-alt",className:"fontA",onClick:this.open}),i.a.createElement(be.a,{"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",open:this.state.open,onClose:this.close},i.a.createElement("div",{className:t.paper,onKeyPress:this.handleKeyPress},i.a.createElement(we.a,{id:"filled-textarea",label:this.props.label,placeholder:this.props.placeHolder,variant:"outlined",style:{width:600,backgroundColor:"#EAFBF7",color:"#378674",borderRadius:5,fontFamily:"sans-serif",fontSize:50,fontWeight:700},onChange:function(t){e.handleInput(t.target.value)},rows:this.props.rows}),i.a.createElement("br",null),i.a.createElement(ve.a,{onClick:this.handle,className:t.button,variant:"contained",color:"primary",style:{background:"#EAFBF7",borderRadius:5,color:"#378674",fontSize:20,height:48,padding:"0 30px",width:300}},"Submit"))))}}]),t}(r.Component)),We=Object(m.withStyles)(function(e){return{rootD:{flexGrow:1,marginTop:75,height:"87vh",color:"#378674"},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit,width:"90%",height:14*e.spacing.unit},background:{background:"#EAFBF7"},but:{float:"right",marginTop:"-35px",paddingRight:5},button:{background:"#378674",marginTop:5,alignSelf:"center"},paper:{width:600,backgroundColor:"#378674",padding:45,margin:"150px auto",textAlign:"center",borderRadius:5,outline:"none"}}})(ze),Le=a(151),Ue=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).handleOpen=function(){a.setState({open:!0})},a.handleClose=function(){a.setState({open:!1})},a.state={storyTitle:"",isAccepted:!1,contributions:null},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e,t=this,a=this.props.storyId;ue.a.get("/contributions/".concat(a)).then(function(a){e=a.data.contributions.length<1?"None to speak of":a.data.contributions.map(function(e){return e}),t.setState({title:a.data.story.title,contributions:e,description:a.data.story.description})}).catch(function(e){t.setState({serverErrorMessage:" Server error"})})}},{key:"render",value:function(){var e=this.props.classes;return console.log(this.props),i.a.createElement("div",null,i.a.createElement(Ce,{buttonName:"CONTRIBUTIONS",onClick:this.handleOpen}),i.a.createElement(be.a,{"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",open:this.state.open,onClose:this.handleClose},i.a.createElement("div",{className:e.paper},i.a.createElement(ge.a,{variant:"h5",id:"modal-title",style:{color:"#EAFBF7",fontFamily:"sans-serif",fontSize:50,fontWeight:700}},this.state.title),i.a.createElement("p",null,this.state.description),i.a.createElement("br",null),i.a.createElement("p",null,"Contribution status: "),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement("div",{className:"buttonBox"},i.a.createElement(ve.a,{variant:"contained",color:"primary",style:{background:"#EAFBF7",borderRadius:5,color:"#378674",fontSize:20,height:48,padding:"0 30px",width:300}},"Approve"),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement(ve.a,{style:{background:"#EAFBF7",borderRadius:5,border:0,color:"#378674",fontSize:20,height:48,padding:"0 30px",width:300},onClick:this.cancel},"Deny")))))}}]),t}(r.Component),He=Object(m.withStyles)(function(e){return{paper:{width:600,backgroundColor:"#378674",padding:20,margin:"150px auto",textAlign:"center",borderRadius:5,outline:"none"}}})(Ue),qe=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).state={tempPro:"",open:!1,openTwo:!1,profilePicture:""},a.handlePicture=a.handlePicture.bind(Object(ce.a)(Object(ce.a)(a))),a.handleBio=a.handleBio.bind(Object(ce.a)(Object(ce.a)(a))),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"handlePicture",value:function(e){this.props.changePic(e),this.setState({open:!1})}},{key:"handleBio",value:function(e){this.props.changeBio(e),this.setState({openTwo:!1})}},{key:"render",value:function(){var e,t=this.props.classes,a=this.props.stories;return e=a?a.map(function(e,t){return i.a.createElement("div",{key:e.story_id},i.a.createElement("h4",{className:"contributionTitle"},e.title),i.a.createElement("li",{className:"userLi"},e.description),i.a.createElement(He,{storyId:e.story_id}))}):i.a.createElement("h4",null,"You have not written any stories yet, time to get writing."),i.a.createElement("div",{className:t.root},i.a.createElement("div",{className:t.itemBio},i.a.createElement(Ie.a,{className:t.card},i.a.createElement("div",{className:t.userInfo},i.a.createElement("div",{className:"profile"},i.a.createElement(Ge.a,{className:t.media,image:this.props.proPic,title:this.props.userName}),i.a.createElement(We,{label:"URL",placeHolder:"Picture URL",change:this.handlePicture,rows:"1"})),i.a.createElement("div",{className:t.titles},i.a.createElement("h3",{style:{color:"black"}},"Name: ",this.props.userName)),i.a.createElement("div",{className:t.titles},i.a.createElement("h3",{style:{color:"black"}},"Bio"),i.a.createElement("div",{className:t.background},i.a.createElement("div",{className:"bioHolder"},i.a.createElement("div",{className:t.bio},i.a.createElement(We,{label:"Bio",placeHolder:"Tell us about you.",change:this.handleBio,rows:"4"}),this.props.bio)))),i.a.createElement("div",{className:t.buttonHolder})),i.a.createElement("div",{className:"contributionBox"},i.a.createElement("div",{className:t.titles},i.a.createElement("h3",{style:{color:"black"}},"Your stories")),i.a.createElement("div",{className:"contributions"},i.a.createElement("ul",{className:"userUl"},e))))))}}]),t}(r.Component);var Ke=Object(N.b)(function(e){return{userId:e.userId,profilePic:e.profilePic}},{})(Object(m.withStyles)(function(e){return{root:{marginTop:75,height:"87vh",overflow:"scroll",flexGrow:1,alignSelf:"center",color:"#EAFBF7"},background:{background:"#EAFBF7",padding:5,width:"100%"},bio:{height:"58vh",boxSizing:"border-box",textAlign:"jusitify",width:"100%",color:"#378674",fontSize:15},button:{background:"#378674",marginTop:5,margin:"auto"},itemBio:{height:"auto",width:850,minWidth:500,margin:"auto",color:"#378674"},card:{maxWidth:850,width:"auto",height:"102%",padding:2*e.spacing.unit,display:"flex",justify:"space-around",color:"#378674"},media:{width:"fill",position:Le.relative,paddingTop:"56.25%"},paper:{position:"absolute",top:"35%",left:"35%",width:50*e.spacing.unit,backgroundColor:e.palette.background.paper,boxShadow:e.shadows[5],padding:4*e.spacing.unit},titles:{textAlign:"center",alignSelf:"center",fontFamily:"Slabo",width:"75%",color:"#378674"},userInfo:{padding:5,margin:5,width:"25%"}}})(qe)),Ye=(a(345),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).state={userId:"",userName:"",bio:"",proPic:"",stories:[],serverErrorMessage:""},a.changePic=a.changePic.bind(Object(ce.a)(Object(ce.a)(a))),a.changeBio=a.changeBio.bind(Object(ce.a)(Object(ce.a)(a))),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.userName,n=t.userId;this.setState({proPic:"https://robohash.org/".concat(n,"?set=set4")}),this.setState({userName:a,userId:n}),ue.a.get("/user/profile/".concat(n)).then(function(t){var a=t.data,r=a.username,i=a.bio,o=a.stories;return e.setState({userName:r,bio:i,stories:o}),ue.a.get("/user/profilePic/".concat(n))}).then(function(t){t.data[0]||e.setState({proPic:"https://robohash.org/".concat(n,"?set=set4")}),e.setState({proPic:t.data[0].url})}).catch(function(t){e.setState({serverErrorMessage:" Server error"})})}},{key:"changePic",value:function(e){var t=this;this.setState({proPic:e}),this.props.updateProfilePic(e);var a=this.state.userId;ue.a.put("/user/profilePic/".concat(a),{url:e}).then(function(e){}).catch(function(e){t.setState({serverErrorMessage:" Server error"})})}},{key:"changeBio",value:function(e){var t=this,a=this.state.userId;this.setState({bio:e}),this.props.updateBio(e),ue.a.put("/user/bio/".concat(a,"?bio=").concat(e)).then(function(e){}).catch(function(e){t.setState({serverErrorMessage:" Server error"})})}},{key:"render",value:function(){var e=this.state.serverErrorMessage&&i.a.createElement(Pe,{error:this.state.serverErrorMessage});return i.a.createElement("div",null,i.a.createElement(Ke,{userName:this.state.userName,changePic:this.changePic,bio:this.state.bio,changeBio:this.changeBio,proPic:this.state.proPic,stories:this.state.stories}),e)}}]),t}(r.Component));var Je=Object(N.b)(function(e){return{userId:e.userId,userName:e.userName}},{updateProfilePic:U,updateBio:H})(Ye),Xe=(a(98),a(37)),$e=a.n(Xe),Qe=a(78),Ze=a.n(Qe);var et=Object(m.withStyles)(function(e){return{root:Object(h.a)({},e.mixins.gutters(),{paddingTop:2*e.spacing.unit,paddingBottom:2*e.spacing.unit})}})(function(e){var t=e.classes,a=e.contribution;return i.a.createElement("div",{className:"contribution"},i.a.createElement(Ze.a,{title:a.username,placement:"bottom-start",interactive:!0},i.a.createElement(ae.a,{to:"/user/".concat(a.user_id)},i.a.createElement($e.a,{style:{backgroundColor:"transparent"},className:t.root,elevation:1},i.a.createElement(ge.a,{align:"left",component:"h3"},a.contribution)))))}),tt=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).state={pages:[],currentPage:2,showNextButton:!0,showPreviousbutton:!1,backArrow:"<"},a.changePage=a.changePage.bind(Object(ce.a)(Object(ce.a)(a))),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.setState({pages:this.props.pages,showNextButton:this.props.pages.length>2})}},{key:"changePage",value:function(e){"next"===e?this.state.pages.length>=this.state.currentPage&&this.setState({currentPage:this.state.currentPage+2,showNextButton:!(this.state.currentPage+2>=this.state.pages.length),showPreviousbutton:!(this.state.currentPage+2<=2)}):"prev"===e&&2<this.state.currentPage&&this.setState({currentPage:this.state.currentPage-2,showPreviousbutton:!(this.state.currentPage-2<=2),showNextButton:!(this.state.currentPage-2>=this.state.pages.length)})}},{key:"render",value:function(){var e=this,t=this.state,a=t.pages,n=t.currentPage;t.showNextButton,t.showPreviousbutton;return i.a.createElement("div",{className:"contribution-view-story"},i.a.createElement("div",{className:"view-story-page one",onClick:function(){e.changePage("prev")}},i.a.createElement("div",{className:"hoverBug-1"},this.state.backArrow),a.length>0?a[n-2].arrWords.join(" "):"loading"),i.a.createElement("div",{className:"view-story-page two",onClick:function(){e.changePage("next")}},i.a.createElement("div",{className:"hoverBug-2"}," > "),a.length>0?a.length>1&&n<a.length?a[n-1].arrWords.join(" "):"":"loading"))}}]),t}(r.Component);a(353);var at=function(){return i.a.createElement("div",{className:"load"},i.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"-11.5 -6 23 20.46348"},")",i.a.createElement("g",{class:"rotatin",stroke:"blue","stroke-width":".01",fill:"none"},i.a.createElement("ellipse",{rx:".5",ry:"1",transform:"rotate(10)"})),i.a.createElement("g",{class:"rotatin",stroke:"yellow","stroke-width":".01",fill:"none"},i.a.createElement("ellipse",{rx:".5",ry:"1",transform:"rotate(60)"})),i.a.createElement("g",{class:"rotatin",stroke:"purple","stroke-width":".01",fill:"none"},i.a.createElement("ellipse",{rx:".5",ry:"1",transform:"rotate(110)"})),i.a.createElement("g",{class:"rotatin",stroke:"orange","stroke-width":".01",fill:"none"},i.a.createElement("ellipse",{rx:".5",ry:"1",transform:"rotate(160)"})),i.a.createElement("g",{class:"rotatin",stroke:"gray","stroke-width":".01",fill:"none"},i.a.createElement("ellipse",{rx:".5",ry:"1",transform:"rotate(60)"})),i.a.createElement("g",{class:"rotatin",stroke:"tomato","stroke-width":".01",fill:"none"},i.a.createElement("ellipse",{rx:".5",ry:"1",transform:"rotate(210)"})),i.a.createElement("g",{class:"rotatin",stroke:"green","stroke-width":".01",fill:"none"},i.a.createElement("ellipse",{rx:".5",ry:"1",transform:"rotate(260)"})),i.a.createElement("g",{class:"rotatin",stroke:"brown","stroke-width":".01",fill:"none"},i.a.createElement("ellipse",{rx:".5",ry:"1",transform:"rotate(310)"})),"// Inner",i.a.createElement("g",{class:"rot",stroke:"blue","stroke-width":".05",fill:"none"},i.a.createElement("ellipse",{rx:"1",ry:"3",transform:"rotate(10)"})),i.a.createElement("g",{class:"rot",c:!0,stroke:"yellow","stroke-width":".05",fill:"none"},i.a.createElement("ellipse",{rx:"1",ry:"3",transform:"rotate(60)"})),i.a.createElement("g",{class:"rot",stroke:"purple","stroke-width":".05",fill:"none"},i.a.createElement("ellipse",{rx:"1",ry:"3",transform:"rotate(110)"})),i.a.createElement("g",{class:"rot",c:!0,stroke:"orange","stroke-width":".05",fill:"none"},i.a.createElement("ellipse",{rx:"1",ry:"3",transform:"rotate(160)"})),i.a.createElement("g",{class:"rot",stroke:"gray","stroke-width":".05",fill:"none"},i.a.createElement("ellipse",{rx:"1",ry:"3",transform:"rotate(60)"})),i.a.createElement("g",{class:"rot",stroke:"tomato","stroke-width":".05",fill:"none"},i.a.createElement("ellipse",{rx:"1",ry:"3",transform:"rotate(210)"})),i.a.createElement("g",{class:"rot",stroke:"green","stroke-width":".05",fill:"none"},i.a.createElement("ellipse",{rx:"1",ry:"3",transform:"rotate(260)"})),i.a.createElement("g",{class:"rot",stroke:"brown","stroke-width":".05",fill:"none"},i.a.createElement("ellipse",{rx:"1",ry:"3",transform:"rotate(310)"})),"// 2nd inner",i.a.createElement("g",{class:"rotating",stroke:"blue","stroke-width":".1",fill:"none"},i.a.createElement("ellipse",{rx:"5",ry:"3",transform:"rotate(10)"})),i.a.createElement("g",{class:"rotating",stroke:"yellow","stroke-width":".1",fill:"none"},i.a.createElement("ellipse",{rx:"5",ry:"3",transform:"rotate(60)"})),i.a.createElement("g",{class:"rotating",stroke:"purple","stroke-width":".1",fill:"none"},i.a.createElement("ellipse",{rx:"5",ry:"3",transform:"rotate(110)"})),i.a.createElement("g",{class:"rotating",stroke:"orange","stroke-width":".1",fill:"none"},i.a.createElement("ellipse",{rx:"5",ry:"3",transform:"rotate(160)"})),i.a.createElement("g",{class:"rotating",stroke:"gray","stroke-width":".1",fill:"none"},i.a.createElement("ellipse",{rx:"5",ry:"3",transform:"rotate(60)"})),i.a.createElement("g",{class:"rotating",stroke:"tomato","stroke-width":".1",fill:"none"},i.a.createElement("ellipse",{rx:"5",ry:"3",transform:"rotate(210)"})),i.a.createElement("g",{class:"rotating",stroke:"green","stroke-width":".1",fill:"none"},i.a.createElement("ellipse",{rx:"5",ry:"3",transform:"rotate(260)"})),i.a.createElement("g",{class:"rotating",stroke:"brown","stroke-width":".1",fill:"none"},i.a.createElement("ellipse",{rx:"5",ry:"3",transform:"rotate(310)"})))," ")},nt=a(101),rt=a.n(nt),it=function(e,t){var a={arrWords:e,pageNumber:t||1};return a.arrWords.push("\n"),a},ot=function(e,t){return e.reduce(function(e,a){var n=a.contribution.split(" "),r=e[e.length-1],i=-1;if(r){if(r&&r.arrWords.length<t){for(var o=0;o<n.length;o++){if(!(r.arrWords.length<t)){i=o-1;break}r.arrWords.push(n[o])}i>-1&&i<n.length&&e.push(it(n.filter(function(e,t){return t>i}),r.pageNumber+1))}}else e.push(it(n));return e},[])},st=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){return function(t){a.setState(Object(le.a)({},e,t.target.checked))}},a.handleTooltipClose=function(){a.setState({open:!1})},a.handleTooltipOpen=function(){a.setState({open:!0})},a.handleReadviewEnable=function(){a.props.toggleReadview(a.props.isReadView),a.setState({isReaderViewEnabled:!a.state.isReaderViewEnabled})},a.state={contribution:{},open:!1,checkedA:!0,checkedB:!0,userId:"",serverErrorMessage:"",isReaderViewEnabled:!1},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.story_id;ue.a.get("/contributions/".concat(t)).then(function(t){return e.setState({contribution:t.data})}).catch(function(t){var a=t.response.data.message;e.setState({serverErrorMessage:a})}),setTimeout(function(){e.props.toggleReadview(e.props.isReadView),e.setState({isReaderViewEnabled:!0})},3e3)}},{key:"render",value:function(){var e=this.state.serverErrorMessage&&i.a.createElement(Pe,{error:this.state.serverErrorMessage});if(!this.state.contribution.story)return i.a.createElement("div",{className:"load"},i.a.createElement(at,null));var t=this.state.contribution.contributions.map(function(e){return i.a.createElement(et,{contribution:e})}),a=this.state.contribution.contributions.reduce(function(e,t){return t.id>e.id&&(e=t),e},{id:0}),n=a?a.id:0,r=this.props.userId?i.a.createElement(ae.a,{to:"/contribute/".concat(this.props.match.params.story_id,"/").concat(n)},i.a.createElement(ve.a,{size:"large"},"Create Contribution")):"";return this.state.checkedA?i.a.createElement("div",{className:"read-view-main"},i.a.createElement("div",{style:{textAlign:"left"},className:"read-view-container"},i.a.createElement("div",{className:"read-view-title"},i.a.createElement("div",{style:{margin:"auto 0"}},this.state.contribution.story.title," "," "),i.a.createElement("div",{className:"headerRight"},i.a.createElement("div",{style:this.state.isReaderViewEnabled?{opacity:"0"}:{opacity:"1"},className:"switch"},i.a.createElement(rt.a,Object(le.a)({defaultChecked:!0,value:"checkedF",color:"default",checked:this.state.checkedA,onChange:this.handleChange("checkedA")},"value","checkedA"))),i.a.createElement("i",{style:{margin:"auto"},onClick:this.handleReadviewEnable,class:"material-icons"},this.state.isReaderViewEnabled?"visibility_off":"visibility"))),i.a.createElement("div",null,i.a.createElement("div",{style:this.state.isReaderViewEnabled?{display:"none"}:{display:"block"}},i.a.createElement("h3",{style:this.state.isReaderViewEnabled?{display:"none"}:{display:"block"}},this.state.contribution.story.description)),i.a.createElement(tt,{pages:ot(this.state.contribution.contributions,270)})),i.a.createElement("div",{className:"butt",style:this.state.isReaderViewEnabled?{display:"none"}:{display:"block"}},i.a.createElement(ae.a,{to:"/dashboard"},i.a.createElement(ve.a,{size:"large"},"Home")),r)),i.a.createElement("div",{style:{display:"none"},className:"contribution"},t),i.a.createElement("div",{style:{display:"none"},className:"buttt"},i.a.createElement(ae.a,{to:"/dashboard"},i.a.createElement(ve.a,{size:"large"},"Home")),r),e):i.a.createElement("div",{className:"read-view-er"},i.a.createElement("div",{className:"head"},i.a.createElement("div",{className:"header"},i.a.createElement("div",{style:{margin:"auto 0px"}},this.state.contribution.story.title," "," "),i.a.createElement("div",{className:"headerRight"},i.a.createElement(rt.a,Object(le.a)({defaultChecked:!0,value:"checkedF",color:"default",checked:this.state.checkedA,onChange:this.handleChange("checkedA")},"value","checkedA")),i.a.createElement("i",{style:{margin:"auto"},onClick:this.handleReadviewEnable,class:"material-icons"},this.state.isReaderViewEnabled?"visibility_off":"visibility")))),i.a.createElement("div",{className:"afterHeader"},i.a.createElement("div",{style:{textAlign:"center"}},i.a.createElement("p",null,"~Preface~")),i.a.createElement("h3",null,this.state.contribution.story.description)),i.a.createElement("div",{className:"contribution"},t),i.a.createElement("div",{className:"butt"},i.a.createElement(ae.a,{to:"/dashboard"},i.a.createElement(ve.a,{size:"large"},"Home")),r),e)}}]),t}(r.Component),lt=Object(N.b)(function(e){return e},n)(st),ct=(a(73),a(40)),dt=a.n(ct),ut=a(41),pt=a.n(ut),ht=a(42),mt=a.n(ht);var bt=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).handleClose=function(){a.setState({open:!1})},a.isStepOptional=function(e){return!1===e},a.handleNext=function(e){var t=a.state.activeStep,n=a.state.skipped;a.props.storyGuideTitle?(a.props.history.push("/create_two"),a.isStepSkipped(t)&&(n=new Set(n.values())).delete(t),a.setState({activeStep:t+1,skipped:n})):(a.setState({error:!0}),alert("Please complete all fields to continue"))},a.handleBack=function(){a.setState(function(e){return{activeStep:e.activeStep-1}})},a.handleSkip=function(){var e=a.state.activeStep;if(!a.isStepOptional(e))throw new Error("You can't skip a step that isn't optional.");a.setState(function(t){var a=new Set(t.skipped.values());return a.add(e),{activeStep:t.activeStep+1,skipped:a}})},a.handleReset=function(){a.setState({activeStep:0})},a.state={is_Complete:!1,user_id:a.props.userId,title:"",description:"",point_of_view:"First Person",is_public:!1,allows_fork:!0,moderator_accepts:!0,open:!0,activeStep:0,skipped:new Set,required:!0,error:!1},a.handleChange=a.handleChange.bind(Object(ce.a)(Object(ce.a)(a))),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"handleChange",value:function(e){this.setState(Object(le.a)({},e.target.name,e.target.value))}},{key:"isStepSkipped",value:function(e){return this.state.skipped.has(e)}},{key:"render",value:function(e){var t=this,a=this.props,n=(a.classes,a.storyGuideTitle,a.addTitle),r=["Add a Title","Write a Description","Story Rules","Review and Submit"],o=this.state.activeStep;return i.a.createElement("div",{className:"createStory",style:{display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center"}},i.a.createElement("div",{className:"title-box"},i.a.createElement("div",null,i.a.createElement("h2",{className:"wizard-title"},"Create Story Wizard")),i.a.createElement("p",null,"We'll walk you through all of guidelines for creating your new story here")),i.a.createElement(dt.a,{id:"stepper",activeStep:o},r.map(function(e,a){var n={},r={};return t.isStepOptional(a)&&(r.optional=i.a.createElement(ge.a,{variant:"caption"},"Optional")),t.isStepSkipped(a)&&(n.completed=!1),i.a.createElement(pt.a,Object.assign({key:e},n),i.a.createElement(mt.a,r,e))})),i.a.createElement("div",null,o===r.length?i.a.createElement("div",null,i.a.createElement(ge.a,null,"All steps completed - you're finished"),i.a.createElement(ve.a,{onClick:this.handleReset},"Reset")):i.a.createElement("div",null,i.a.createElement(ge.a,null,function(e){switch(e){case 0:return"";case 1:return"What is this story about?";case 2:return"How much control do you want?";case 3:return"Almost Finished..";default:return"Review and Submit"}}(o)))),i.a.createElement("div",{className:"wizard-box",style:{maxWidth:"80%"}},i.a.createElement(we.a,{className:"title",name:"title",label:"Title (maximum: 100 characters)",style:{backgroundColor:"#EAFBF7",width:"80%"},required:this.state.required,error:this.state.error,inputProps:{maxLength:"100"},onChange:function(e){n(e.target.value)},margin:"normal",variant:"outlined"}),i.a.createElement("div",{className:"button"},i.a.createElement(ve.a,{variant:"contained",style:{color:"#378674ff",backgroundColor:"#EAFBF7",textDecoration:"none",width:"40%",height:"100%"},onClick:this.handleNext},o===r.length-1?"Finish":"Next"))))}}]),t}(r.Component);var ft=Object(N.b)(function(e){return{storyGuideTitle:e.storyGuideTitle}},{addTitle:J})(bt);var gt=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).isStepOptional=function(e){return-1===e},a.handleNext=function(){var e=a.state.activeStep,t=a.state.skipped;a.props.storyGuideDescripton?(a.props.history.push("/create_three"),a.isStepSkipped(e)&&(t=new Set(t.values())).delete(e),a.setState({activeStep:e+1,skipped:t})):(a.setState({error:!0}),alert("Please complete all fields to continue"))},a.handleBack=function(){a.props.history.push("/create_one"),a.setState(function(e){return{activeStep:e.activeStep-1}})},a.handleSkip=function(){var e=a.state.activeStep;if(!a.isStepOptional(e))throw new Error("You can't skip a step that isn't optional.");a.setState(function(t){var a=new Set(t.skipped.values());return a.add(e),{activeStep:t.activeStep+1,skipped:a}})},a.handleReset=function(){a.setState({activeStep:0})},a.state={is_Complete:!1,user_id:a.props.userId,title:"",description:"",point_of_view:"First Person",is_public:!1,allows_fork:!0,moderator_accepts:!0,activeStep:1,skipped:new Set,required:!0,error:!1},a.handleChange=a.handleChange.bind(Object(ce.a)(Object(ce.a)(a))),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"handleChange",value:function(e){this.setState(Object(le.a)({},e.target.name,e.target.value))}},{key:"isStepSkipped",value:function(e){return this.state.skipped.has(e)}},{key:"render",value:function(e){var t=this,a=this.props,n=(a.classes,a.storyGuideDescripton,a.addDescripton),r=["Add a Title","Write a Description","Story Rules","Review and Submit"],o=this.state.activeStep;return i.a.createElement("div",{className:"createStory"},i.a.createElement("div",{className:"title-box"},i.a.createElement("h2",{className:"wizard-title"},"Create Story Wizard"),i.a.createElement("img",{src:""})),i.a.createElement(dt.a,{activeStep:o,id:"stepper"},r.map(function(e,a){var n={},r={};return t.isStepOptional(a)&&(r.optional=i.a.createElement(ge.a,{variant:"caption"},"Optional")),t.isStepSkipped(a)&&(n.completed=!1),i.a.createElement(pt.a,Object.assign({key:e},n),i.a.createElement(mt.a,r,e))})),i.a.createElement("div",null,o===r.length?i.a.createElement("div",null,i.a.createElement(ge.a,null,"All steps completed - you're finished"),i.a.createElement(ve.a,{onClick:this.handleReset},"Reset")):i.a.createElement("div",null,i.a.createElement(ge.a,null,function(e){switch(e){case 0:return"Add a Title";case 1:return"What is this story about?";case 2:return"How much control do you want?";case 3:return"Almost Finished..";default:return"Review and Submit"}}(o)))),i.a.createElement("div",{className:"wizard-box",style:{width:"80%",height:"100%",marginLeft:"10%"}},i.a.createElement(we.a,{className:"descripton",name:"description",label:"Description (maximum: 1000 characters)",multiline:!0,rowsMax:15,required:this.state.required,error:this.state.error,inputProps:{maxLength:"1000"},style:{textDecoration:"none",height:"400px",wordBreak:"none",backgroundColor:"#EAFBF7"},onChange:function(e){n(e.target.value)},margin:"normal",variant:"outlined"}),i.a.createElement("div",{className:"button",id:"wizard-buttons"},i.a.createElement(ve.a,{variant:"contained",color:"primary",disabled:0===o,onClick:this.handleBack,style:{color:"#378674ff",backgroundColor:"#EAFBF7",textDecoration:"none",width:"40%",height:"100%"}},"BACK"),i.a.createElement(ve.a,{variant:"contained",color:"primary",style:{color:"#378674ff",backgroundColor:"#EAFBF7",width:"40%",height:"100%"},onClick:this.handleNext},o===r.length-1?"Finish":"Next"))))}}]),t}(r.Component);var Et=Object(N.b)(function(e){return{storyGuideDescripton:e.storyGuideDescripton}},{addDescripton:X})(gt),vt=a(75),yt=a.n(vt),St=a(39),kt=a.n(St),wt=a(76),Ot=a.n(wt),Ct=a(153),jt=a.n(Ct),Nt=function(e){return{root:{display:"flex",flexWrap:"wrap"},formControl:{margin:e.spacing.unit,minWidth:120},selectEmpty:{marginTop:2*e.spacing.unit},fab:{margin:2*e.spacing.unit},absolute:{position:"absolute",bottom:2*e.spacing.unit,right:3*e.spacing.unit}}};var xt=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){a.setState(Object(le.a)({},e.target.name,e.target.value))},a.isStepOptional=function(e){return-1===e},a.handleNext=function(e){var t=a.state.activeStep,n=a.state.skipped;a.props.storyGuidePOV&&""!==a.props.storyGuideFork?(a.props.history.push("/create_four"),a.isStepSkipped(t)&&(n=new Set(n.values())).delete(t),a.setState({activeStep:t+1,skipped:n})):(a.setState({error:!0}),alert("Please complete all fields to continue"))},a.handleBack=function(){a.props.history.push("/create_two"),a.setState(function(e){return{activeStep:e.activeStep-1}})},a.handleSkip=function(){var e=a.state.activeStep;if(!a.isStepOptional(e))throw new Error("You can't skip a step that isn't optional.");a.setState(function(t){var a=new Set(t.skipped.values());return a.add(e),{activeStep:t.activeStep+1,skipped:a}})},a.handleReset=function(){a.setState({activeStep:0})},a.state={storyGuidePOV:"",storyGuideFork:"",storyGuideMod:!0,labelWidth:0,activeStep:2,skipped:new Set,required:!0,error:!1},a.handleChange=a.handleChange.bind(Object(ce.a)(Object(ce.a)(a))),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(e){this.setState({labelWidth:"40px"}),this.props.addModerator(this.state.storyGuideMod)}},{key:"isStepSkipped",value:function(e){return this.state.skipped.has(e)}},{key:"render",value:function(e){var t=this,a=this.props,n=a.storyGuidePOV,r=a.addPOV,o=a.storyGuideFork,s=a.addForkRestriction,l=(a.storyGuideMod,a.addModerator,a.classes,["Add a Title","Write a Description","Story Rules","Review and Submit"]),c=this.state.activeStep;return i.a.createElement("div",{className:"createStory",id:"storyGuidelines"},i.a.createElement("div",{className:"title-box"},i.a.createElement("h2",{className:"wizard-title"},"Create Story Wizard")),i.a.createElement(dt.a,{activeStep:c,id:"stepper"},l.map(function(e,a){var n={},r={};return t.isStepOptional(a)&&(r.optional=i.a.createElement(ge.a,{variant:"caption"},"Optional")),t.isStepSkipped(a)&&(n.completed=!1),i.a.createElement(pt.a,Object.assign({key:e},n),i.a.createElement(mt.a,r,e))})),i.a.createElement("div",null,c===l.length?i.a.createElement("div",null,i.a.createElement(ge.a,null,"All steps completed - you're finished"),i.a.createElement(ve.a,{onClick:this.handleReset},"Reset")):i.a.createElement("div",null,i.a.createElement(ge.a,null,function(e){switch(e){case 0:return"Add a Title";case 1:return"What is this story about?";case 2:return"Story Guidelines";case 3:return"Almost Finished..";default:return"Review and Submit"}}(c)))),i.a.createElement("div",{id:"POV-Fork-Mod",style:{justifyContent:"space-between",maxWidth:"250px"}},i.a.createElement("form",{className:Nt.root,style:{justifyContent:"space-between",width:"100%",padding:"0px"},autoComplete:"off"},i.a.createElement(Se.a,{className:Nt.formControl,required:this.state.required,error:this.state.error,style:{display:"flex",flexDirection:"column",justifyContent:"space-between",textAlign:"left"}},i.a.createElement(yt.a,{id:"questions",htmlFor:"age-simple",style:{color:"#EAFBF7"}},"Point of View "),i.a.createElement(Ot.a,{value:n,onChange:function(e){r(e.target.value)},inputProps:{name:"point_of_view",id:"age-simple"}},i.a.createElement(kt.a,{value:"",style:{backgroundColor:"#EAFBF7"}},i.a.createElement("em",null,"(Select One)")),i.a.createElement(kt.a,{value:"First Person",style:{backgroundColor:"#EAFBF7"}},"First Person"),i.a.createElement(kt.a,{value:"Second Person",style:{backgroundColor:"#EAFBF7"}},"Second Person"),i.a.createElement(kt.a,{value:"Third Person",style:{backgroundColor:"#EAFBF7"}},"Third Person"),i.a.createElement(kt.a,{value:"Narrative",style:{backgroundColor:"#EAFBF7"}},"Narrative"))),i.a.createElement(Se.a,{className:Nt.formControl,required:this.state.required,error:this.state.error},i.a.createElement(yt.a,{id:"questions",htmlFor:"age-helper",style:{color:"#eafbf7",display:"flex",flexDirection:"row",justifyContent:"flex-end",alignItems:"center"}},"Allows New Story Branch   ",i.a.createElement(Ze.a,{title:"This feature allows contributors to create a new branch and go in new direction with the story.","aria-label":"HelpRounded"},i.a.createElement(y.a,{style:{backgroundColor:"transparent"}},i.a.createElement(jt.a,{style:{height:"20%"}})))),i.a.createElement(Ot.a,{value:o,onChange:function(e){s(e.target.value)},inputProps:{name:"allows_fork",id:"age-helper"}},i.a.createElement(kt.a,{value:"",style:{backgroundColor:"#EAFBF7"}},i.a.createElement("em",null,"(Select One)")),i.a.createElement(kt.a,{value:!0,style:{backgroundColor:"#EAFBF7"}},"Yes"),i.a.createElement(kt.a,{value:!1,style:{backgroundColor:"#EAFBF7"}},"No"))),i.a.createElement("div",null)),i.a.createElement("div",{id:"wizard-buttons"},i.a.createElement(ve.a,{variant:"contained",disabled:0===c,onClick:this.handleBack,style:{color:"#378674ff",backgroundColor:"#EAFBF7",textDecoration:"none",width:"40%",height:"100%"}},"BACK"),i.a.createElement(ve.a,{variant:"contained",style:{color:"#378674ff",backgroundColor:"#EAFBF7",width:"40%",height:"100%"},onClick:this.handleNext},c===l.length-1?"Finish":"Next"))))}}]),t}(r.Component);var Ft=Object(N.b)(function(e){return{storyGuidePOV:e.storyGuidePOV,storyGuideFork:e.storyGuideFork,storyGuideMod:e.storyGuideMod}},{addPOV:$,addForkRestriction:Q,addModerator:Z})(xt);var Pt=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).isStepOptional=function(e){return-1===e},a.handleNext=function(){var e=a.state.activeStep,t=a.state.skipped;a.isStepSkipped(e)&&(t=new Set(t.values())).delete(e),a.setState({activeStep:e+1,skipped:t})},a.handleBack=function(){a.setState(function(e){return{activeStep:e.activeStep-1}})},a.handleSkip=function(){var e=a.state.activeStep;if(!a.isStepOptional(e))throw new Error("You can't skip a step that isn't optional.");a.setState(function(t){var a=new Set(t.skipped.values());return a.add(e),{activeStep:t.activeStep+1,skipped:a}})},a.handleReset=function(){a.setState({activeStep:0})},a.state={is_Complete:!1,userId:"",title:"",description:"",point_of_view:"First Person",is_public:!1,allows_fork:!0,moderator_accepts:!0,serverErrorMessage:"",activeStep:3,skipped:new Set},a.addNewStory=a.addNewStory.bind(Object(ce.a)(Object(ce.a)(a))),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){console.log(this.props);var e=this.props.userId;this.setState({userId:e})}},{key:"addNewStory",value:function(e){var t=this,a=this.props,n=a.storyGuideTitle,r=a.storyGuideDescripton,i=a.storyGuidePOV,o=a.storyGuideFork,s=a.storyGuideMod,l={is_complete:!1,userId:a.userId,title:n,description:r,point_of_view:i,is_public:!1,allows_fork:o,moderator_accepts:s};ue.a.post("/newStory",l).then(function(e){console.log("new story added"),t.props.history.push("/")}).catch(function(e){t.setState({serverErrorMessage:" Server error"})})}},{key:"isStepSkipped",value:function(e){return this.state.skipped.has(e)}},{key:"render",value:function(e){var t=this,a=this.state.serverErrorMessage&&i.a.createElement(Pe,{error:this.state.serverErrorMessage}),n=this.props,r=(n.classes,n.storyGuideTitle),o=n.storyGuideDescripton,s=n.storyGuidePOV,l=n.storyGuideFork,c=(n.storyGuideMod,["Add a Title","Write a Description","Story Rules","Review and Submit"]),d=this.state.activeStep;return i.a.createElement("div",{className:"createStory"},i.a.createElement("div",null,i.a.createElement("h2",{style:{fontSize:"40px",paddingTop:"5%"}},"You're Almost Finished")),i.a.createElement("div",null,i.a.createElement("h2",null,"Please Review the Story Guidelines You've Selected ")),i.a.createElement(dt.a,{activeStep:d,id:"stepper"},c.map(function(e,a){var n={},r={};return t.isStepOptional(a)&&(r.optional=i.a.createElement(ge.a,{variant:"caption"},"Optional")),t.isStepSkipped(a)&&(n.completed=!1),i.a.createElement(pt.a,Object.assign({key:e},n),i.a.createElement(mt.a,r,e))})),i.a.createElement("div",null,d===c.length?i.a.createElement("div",null,i.a.createElement(ge.a,null,"All steps completed - you're finished"),i.a.createElement(ve.a,{onClick:this.handleReset},"Reset")):i.a.createElement("div",null,i.a.createElement(ge.a,null,function(e){switch(e){case 0:return"Add a Title";case 1:return"What is this story about?";case 2:return"How much control do you want?";case 3:return"";default:return"Review and Submit"}}(d)))),i.a.createElement("div",{className:"create-three-div",style:{justifyContent:"space-between"}},i.a.createElement("div",{id:"POV-Fork-Mod"},i.a.createElement("h2",{id:"questions"},"Title:"),i.a.createElement("div",{style:{fontSize:"14pt",fontStyle:"normal",fontFamily:"Slabo 27px"}},r),i.a.createElement(ae.a,{to:"/create_one",style:{textDecoration:"none"}},i.a.createElement(ve.a,{variant:"contained",color:"primary",style:{color:"#378674ff",backgroundColor:"#EAFBF7",textDecoration:"none",width:"20%",height:"100%"},onClick:function(){t.addNewStory()}},"Edit"))),i.a.createElement("div",{id:"POV-Fork-Mod"},i.a.createElement("h2",{id:"questions"},"Description:"),i.a.createElement("div",{style:{fontSize:"12pt",fontStyle:"normal",fontFamily:"Slabo 27px",padding:"5px",textAlign:"left"}},o),i.a.createElement(ae.a,{to:"/create_two",style:{textDecoration:"none"}},i.a.createElement(ve.a,{variant:"contained",color:"primary",style:{color:"#378674ff",backgroundColor:"#EAFBF7",textDecoration:"none",width:"20%",height:"100%"},onClick:function(){t.addNewStory()}},"Edit"))),i.a.createElement("div",{id:"POV-Fork-Mod"},i.a.createElement("h2",{id:"questions"},"Point of View:"),i.a.createElement("div",{style:{fontSize:"14pt",fontStyle:"normal",fontFamily:"Slabo 27px"}},s),i.a.createElement(ae.a,{to:"/create_three",style:{textDecoration:"none"}},i.a.createElement(ve.a,{variant:"contained",color:"primary",style:{color:"#378674ff",backgroundColor:"#EAFBF7",textDecoration:"none",width:"20%",height:"100%"},onClick:function(){t.addNewStory()}},"Edit"))),i.a.createElement("div",{id:"POV-Fork-Mod"},i.a.createElement("h2",{id:"questions"},"Allows Story to Fork:"),l?i.a.createElement("div",{style:{fontSize:"14pt",fontStyle:"normal",fontFamily:"Slabo 27px"}},"Yes"):i.a.createElement("div",{style:{fontSize:"14pt",fontStyle:"normal",fontFamily:"Slabo 27px"}},"No"),i.a.createElement(ae.a,{to:"/create_three",style:{textDecoration:"none"}},i.a.createElement(ve.a,{variant:"contained",color:"primary",style:{color:"#378674ff",backgroundColor:"#EAFBF7",textDecoration:"none",width:"20%",height:"100%"},onClick:function(){t.addNewStory()}},"Edit"))),i.a.createElement("div",{className:"button"},i.a.createElement(ve.a,{variant:"contained",color:"primary",style:{color:"#378674ff",backgroundColor:"#EAFBF7",textDecoration:"none",width:"40%",height:"100%"},onClick:function(){t.addNewStory()}},d===c.length-1?"Submit New Story":"Next"," "))),a)}}]),t}(r.Component);var Bt=Object(N.b)(function(e){return{storyGuideTitle:e.storyGuideTitle,storyGuideDescripton:e.storyGuideDescripton,storyGuidePOV:e.storyGuidePOV,storyGuideFork:e.storyGuideFork,storyGuideMod:e.storyGuideMod,userId:e.userId}},{addTitle:J,addDescripton:X,addPOV:$,addForkRestriction:Q,addModerator:Z})(Pt),_t=(a(368),a(158)),At=a.n(_t),Rt=a(154),Dt=a.n(Rt),Tt=a(156),It=a.n(Tt),Mt=a(157),Gt=a.n(Mt),Vt=a(155),zt=a.n(Vt),Wt=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(d.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1},a.handleClickOpen=function(){a.setState({open:!0})},a.handleClose=function(){a.setState({open:!1})},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){localStorage.getItem("hasUserVisitedSite")?this.setState({open:!1}):(localStorage.setItem("hasUserVisitedSite","true"),this.setState({open:!0}))}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement(Dt.a,{open:this.state.open,onClose:this.handleClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},i.a.createElement(zt.a,{id:"alert-dialog-title"},i.a.createElement("div",{className:"dialogTitle"},"Branches")),i.a.createElement(It.a,null,i.a.createElement(Gt.a,{style:{color:"#EAFBF7"},id:"alert-dialog-description"},"Welcome to Branches! Your story starts here and continues with the help of the community around you. This website is designed to let loose the creative mind by allowing individuals to collaborate with narrative. Please feel free to read and enjoy these stories! Create an account to make your own and contribute to others! Enjoy!"))))}}]),t}(i.a.Component),Lt=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).handleClose=function(){a.setState({open:!1})},a.state={filteredStories:[],stories:[],open:!0},a.handleChange=a.handleChange.bind(Object(ce.a)(Object(ce.a)(a))),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;ue.a.get("/api/Dashboard").then(function(t){var a=t.data;e.setState({stories:a,filteredStories:a})}).catch(function(t){e.setState({serverErrorMessage:" Server error"})})}},{key:"handleChange",value:function(e){this.setState({filteredStories:this.state.stories.filter(function(t){return t.title.toUpperCase().includes(e.target.value.toUpperCase())})})}},{key:"handleChange",value:function(e){this.setState({filteredStories:this.state.stories.filter(function(t){return t.title.toUpperCase().includes(e.target.value.toUpperCase())})})}},{key:"render",value:function(){var e=this.state.filteredStories.map(function(e){return i.a.createElement(Ie.a,{className:"storybox",key:e.story_id},i.a.createElement(At.a,null,i.a.createElement("div",{className:"storyname"},e.title),i.a.createElement("div",{className:"description"},e.description),i.a.createElement(ae.a,{to:"/view_story/".concat(e.story_id)},i.a.createElement("button",{className:"view"},"View story")),i.a.createElement("button",{className:"view"},"Add to Favorites")))});return i.a.createElement("div",{className:"idk"},i.a.createElement("div",{className:"dashboard"},e,i.a.createElement(Ne.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:this.state.open,autoHideDuration:6e3,onClose:this.handleClose,message:i.a.createElement("p",null,"This is your dashboard. Choose your actions wisely!"),action:[i.a.createElement(y.a,{key:"close","aria-label":"Close",color:"inherit",onClick:this.handleClose},i.a.createElement(Fe.a,null))]})),i.a.createElement("input",{name:"filter",type:"text",placeholder:"Search by Title",onChange:this.handleChange}),i.a.createElement(Wt,null),i.a.createElement("h3",{className:"storydash"},"Stories Dashboard"))}}]),t}(r.Component),Ut=(a(375),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).state={user_id:0,contribution:"",is_accepted:!1,multiline:"Controlled",prior_contribution:{},serverErrorMessage:""},a.handleChange=a.handleChange.bind(Object(ce.a)(Object(ce.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(ce.a)(Object(ce.a)(a))),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;ue.a.get("/contributions/last_contribution/".concat(this.props.match.params.prior_contribution_id)).then(function(t){e.setState({prior_contribution:t.data})}).catch(function(t){e.setState({serverErrorMessage:" Server error"})})}},{key:"handleChange",value:function(e){this.setState({contribution:e.target.value})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a=this.state,n=a.user_id,r=a.contribution,i=a.is_accepted;if(r){var o={user_id:n,story_id:this.props.match.params.story_id,contribution:r,is_accepted:i,prior_contribution_id:this.props.match.params.prior_contribution_id};ue.a.post("/contributions",o).then(function(e){t.props.history.push("/view_story/".concat(t.props.match.params.story_id))}).catch(function(e){t.setState({serverErrorMessage:" Server error"})})}else console.log("Put something in the field!!")}},{key:"render",value:function(){var e=this.state.serverErrorMessage&&i.a.createElement(Pe,{error:this.state.serverErrorMessage});return i.a.createElement("div",{className:"contribute"},i.a.createElement("form",{noValidate:!0,autoComplete:"off"},i.a.createElement("h1",{className:"add"},"Add contribution"),i.a.createElement("h3",{className:"prior"},"~ Branch off the last contribution ~",i.a.createElement("p",null,this.state.prior_contribution.contribution)),i.a.createElement(we.a,{value:this.state.contribution,id:"outlined-multiline-flexible",label:"Continue the story here!",multiline:!0,rowsMax:"4",margin:"normal",variant:"outlined",onChange:this.handleChange}),i.a.createElement("div",{className:"butt"},i.a.createElement(ae.a,{style:{textDecoration:"none"},to:"/view_story/".concat(this.props.match.params.story_id)},i.a.createElement(ve.a,{size:"large",style:{width:"125px",textDecoration:"none"}},"Go Back To Story")),i.a.createElement(ve.a,{type:"submit",style:{margin:"auto"},size:"large",color:"default",onClick:this.handleSubmit},"Submit Contribution"))),e)}}]),t}(i.a.Component)),Ht=i.a.createElement(oe.a,null,i.a.createElement(se.a,{path:"/user/:user_id",component:Je}),i.a.createElement(se.a,{path:"/user",component:Je}),i.a.createElement(se.a,{path:"/view_story/:story_id",component:lt}),i.a.createElement(se.a,{path:"/contribute/:story_id/:prior_contribution_id",component:Ut}),i.a.createElement(se.a,{path:"/create_one",component:ft}),i.a.createElement(se.a,{path:"/create_two",component:Et}),i.a.createElement(se.a,{path:"/create_three",component:Ft}),i.a.createElement(se.a,{path:"/create_four",component:Bt}),i.a.createElement(se.a,{path:"/login",component:De}),i.a.createElement(se.a,{path:"/",component:Lt})),qt=(a(378),a(160)),Kt=a.n(qt),Yt=a(161),Jt=a.n(Yt),Xt=a(162),$t=a.n(Xt),Qt=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).state={serverErrorMessage:""},a.handleLogout=a.handleLogout.bind(Object(ce.a)(Object(ce.a)(a))),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"handleLogout",value:function(){var e=this;ue.a.post("/user/logout").then(function(){e.props.logout()}).catch(function(t){e.setState({serverErrorMessage:" Server error"})})}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.userName,r=""!==n?i.a.createElement("div",{className:"profile-button"},"Hello, ",i.a.createElement(ae.a,{to:"/user"},n.toUpperCase()),i.a.createElement("br",null),i.a.createElement("span",{onClick:this.handleLogout},"Logout")):i.a.createElement(ae.a,{className:"profile-button",to:"/Login"},"Login");return i.a.createElement("div",{style:this.props.isReadView?{display:"none"}:{display:"block"}}," ",i.a.createElement(Kt.a,{position:"fixed",className:he()(a.appBar,Object(le.a)({},a.appBarShift,this.props.openClose))},i.a.createElement(Jt.a,{className:"header-inner-container",disableGutters:!this.props.openClose},i.a.createElement(y.a,{color:"inherit","aria-label":"Open drawer",onClick:function(){e.props.makeOpenClose(e.props.openClose)},className:he()(a.menuButton,this.props.openClose&&a.hide)},i.a.createElement($t.a,null)),i.a.createElement("div",null,"Branches"),i.a.createElement("div",null,r))))}}]),t}(r.Component),Zt=Object(N.b)(function(e){return e},n)(Object(m.withStyles)(function(e){return{root:{display:"flex"},appBar:{transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{width:"calc(100% - ".concat(240,"px)"),marginLeft:240,transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen})},menuButton:{marginLeft:12,marginRight:20},hide:{display:"none"},drawer:{width:240,flexShrink:0},drawerPaper:{width:240},drawerHeader:Object(h.a)({display:"flex",alignItems:"center",padding:"0 8px"},e.mixins.toolbar,{justifyContent:"flex-end"}),content:{flexGrow:1,padding:3*e.spacing.unit,transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),marginLeft:-240},contentShift:{transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginLeft:0}}},{withTheme:!0})(Qt)),ea=Object(m.createMuiTheme)({typography:{useNextVariants:!0},palette:{primary:{main:"#378674"},secondary:{light:" #eafbf7",main:"#5d5147",contrastText:"#ffcc00"}}}),ta=a(62),aa=a(163),na=a(390);ta.b.add(aa.a);var ra=function(e){function t(){return Object(l.a)(this,t),Object(d.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;ue.a.get("/api/isLoggedIn").then(function(t){if(Object.keys(t.data).length>0){var a=t.data,n=a.id,r=a.username;e.props.getUser(n,r)}})}},{key:"componentDidUpdate",value:function(e){this.props.location!==e.location&&this.props.toggleReadview(!0)}},{key:"render",value:function(){return i.a.createElement("div",{className:"App"},i.a.createElement(m.MuiThemeProvider,{theme:ea},i.a.createElement("div",null,i.a.createElement(Zt,null),i.a.createElement(ie,null),Ht)))}}]),t}(r.Component),ia=Object(na.a)(Object(N.b)(null,n)(ra));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var oa=a(389),sa=a(61),la=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||sa.b,ca=Object(sa.c)(te,la());s.a.render(i.a.createElement(N.a,{store:ca},i.a.createElement(oa.a,null,i.a.createElement(ia,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},73:function(e,t,a){},98:function(e,t,a){}},[[165,2,1]]]);
//# sourceMappingURL=main.b474d35b.chunk.js.map